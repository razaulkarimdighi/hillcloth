
{{ 'product-template.css' | asset_url | stylesheet_tag }}

<div class="product-template-{{ section.id }}">
  <div class="product-main">
    <div class="container">
      <div class="row">

        <!-- PRODUCT IMAGES -->
        <div class="col-md-6">
          <div class="product-media">
            {% for image in product.images %}
              {{ image | image_url: width: 600 | image_tag }}
            {% endfor %}
          </div>
        </div>

        <!-- PRODUCT INFO -->
        <div class="col-md-6">
          <div class="product-information">

            {% assign form_id = 'product-form-' | append: section.id %}
            {% form 'product', product, id: form_id, class: 'product-form' %}

              <!-- REQUIRED VARIANT ID -->
              <input
                type="hidden"
                name="id"
                value="{{ product.selected_or_first_available_variant.id }}"
              >

              {{ form | payment_terms }}

              {% for block in section.blocks %}
                {% case block.type %}

                  {% when '@app' %}
                    {% render block %}

                  {% when 'text' %}
                    <p>{{ block.settings.text }}</p>

                  {% when 'title' %}
                    <h1 class="product-title">{{ product.title }}</h1>

                  {% when 'price' %}
                    <div class="product-price">
                      {{ product.selected_or_first_available_variant.price | money_with_currency }}
                    </div>

                  {% when 'sku' %}
                    <div class="product-sku">
                      {{ product.selected_or_first_available_variant.sku }}
                    </div>

                  {% when 'description' %}
                    <div class="rte">
                      {{ product.description }}
                    </div>

                  {% when 'quantity' %}
                    <div class="product-quantity">
                      <input type="number" name="quantity" value="1" min="1">
                    </div>

                  {% when 'buy_buttons' %}
                    <div class="cart-buttons">
                      <button
                        type="submit"
                        name="add"
                        class="btn btn-primary"
                      >
                        Add to cart
                      </button>

                      {% if block.settings.enable_dynamic_button %}
                        {{ form | payment_button }}
                      {% endif %}
                    </div>

                {% endcase %}
              {% endfor %}

            {% endform %}
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Product template",
  "class": "product-template",
  "settings": [],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Vendor name"
        }
      ]
    },
    {
      "type": "title",
      "name": "Title"
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1
    },
    {
      "type": "sku",
      "name": "SKU"
    },
    {
      "type": "description",
      "name": "Description"
    },
    {
      "type": "quantity",
      "name": "Quantity",
      "limit": 1
    },
    {
      "type": "buy_buttons",
      "name": "Buy Buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "enable_dynamic_button",
          "label": "Enable dynamic checkout button",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product template"
    }
  ]
}
{% endschema %}
